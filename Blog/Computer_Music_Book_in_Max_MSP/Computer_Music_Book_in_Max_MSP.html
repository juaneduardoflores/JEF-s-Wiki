<!DOCTYPE html>
<html  dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="pandoc" />

    <title></title>

    <!-- UIKit files -->
    <link rel="stylesheet" href="../../css/uikit.min.css" />
    <script src="../../js/uikit.min.js"></script>
    <script src="../../js/uikit-icons.min.js"></script>

    <!-- Favicon -->
    <link rel="shortcut icon" href="../../resources/favicon.ico" type="image/x-icon" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@300&display=swap" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Rozha+One&display=swap" rel="stylesheet" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />

    <!-- Code Style -->
    <link rel="stylesheet" href="../../css/pojoaque.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>

    <!-- hljs -->
    <script>
      hljs.highlightAll();
    </script>

    <!-- Makes Inline Code Similar Style to hljs theme -->
    <script charset="utf-8">
      document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('pre code').forEach((el) => {
          hljs.highlightElement(el);
        });
        document.querySelectorAll('p code').forEach((el) => {
          el.classList.add('language-plaintext');
          hljs.highlightElement(el);
        });
      });
    </script>

    <!-- Styling of Code -->
    <style>
      td.hljs-ln-numbers {
        text-align: center;
        color: #ccc;
        border-right: 1px solid #999;
        vertical-align: top;
        padding-right: 5px;

        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      td.hljs-ln-code {
        padding-left: 10px;
      }

      .hljs-ln td.hljs-ln-numbers {
        padding-left: 10px;
      }

      code {
        padding: 15px;
      }

      .code-badge {
        display: flex !important;
        flex-direction: row !important;
        background: #555 !important;
        padding: 8px !important;
        position: absolute !important;
        right: 0px !important;
      }

      .code-badge-copy-icon {
        font-size: 1.3em !important;
      }

      .hide-on-load {
        display: none;
      }

      .code-badge-pre {
        overflow: hidden;
      }

      .hljs {
        overflow: auto;
      }

      canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }
    </style>

    <!-- Blog Style CSS -->
    <link rel="stylesheet" href="../../css/blog_style.css" />

    <!-- Includes other header content if needed -->
    
  </head>

  <body>
    <!-- NAV AND HEADING -->
    <div
      class="uk-flex uk-flex-left uk-background-cover"
      style="background-image: url(../../resources/textured_black_sharpened.png); height: 50px"
      uk-sticky
    >
      <button class="uk-button uk-button-default" type="button" style="border: none" uk-toggle="target: #blog-toc">
        <span uk-icon="icon: menu; ratio: 1.5;" style="color: white"></span>
      </button>

      <!-- HEADING -->
      <h2
        id="heading"
        class="uk-flex uk-flex-center uk-margin-remove uk-padding-small uk-padding-remove-vertical uk-position-center-left"
        style="font-family: 'Inter-ExtraLight', serif; color: white; left: 60px"
      >
        <a class="uk-text" style="color: white; font-weight: normal; font-size: 1em" href="../../blog.html">Art & Technology</a>
        &nbsp;&nbsp;
        <span style="font-family: Rozha One, serif; font-size: 100%">[ BLOG ]</span>
      </h2>
    </div>

    <div class="uk-align-center uk-margin-remove-top uk-width-1-2@l uk-width-2-3@m" id="contentArea">
      <!-- TABLE OF CONTENTS -->
      <div id="blog-toc" style="top: 50px" uk-offcanvas="mode: slide; container: #contentArea; bg-close: true;">
        <div class="uk-offcanvas-bar">
          <a href="../../blog.html" uk-icon="icon: home;"></a>
          <hr />
          <h3>Table of Contents</h3>
          <div><ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a>
<ul>
<li><a href="#computer-music-book" id="toc-computer-music-book">Computer
Music Book</a></li>
<li><a href="#maxmsp" id="toc-maxmsp">Max/MSP</a></li>
<li><a href="#gen" id="toc-gen">gen~</a></li>
</ul></li>
<li><a href="#synthesis-fundamentals"
id="toc-synthesis-fundamentals">Synthesis Fundamentals</a>
<ul>
<li><a href="#unit-generator" id="toc-unit-generator">Unit
Generator</a></li>
<li><a href="#parameters" id="toc-parameters">parameters</a></li>
<li><a href="#signal-flowcharts" id="toc-signal-flowcharts">Signal
Flowcharts</a></li>
<li><a href="#wave-tables" id="toc-wave-tables">Wave Tables</a></li>
<li><a href="#aliasing" id="toc-aliasing">Aliasing</a></li>
<li><a href="#generating-functions-of-time"
id="toc-generating-functions-of-time">Generating Functions of
Time</a></li>
<li><a href="#additive-synthesis" id="toc-additive-synthesis">Additive
Synthesis</a>
<ul>
<li><a href="#helmholtzs-apparatus-for-the-synthesis-of-sound"
id="toc-helmholtzs-apparatus-for-the-synthesis-of-sound">Helmholtz’s
Apparatus for the Synthesis of Sound</a></li>
</ul></li>
<li><a href="#amplitude-modulation"
id="toc-amplitude-modulation">Amplitude Modulation</a></li>
<li><a href="#ring-modulation" id="toc-ring-modulation">Ring
Modulation</a></li>
<li><a href="#vibrato-stimulation-by-frequency-modulation"
id="toc-vibrato-stimulation-by-frequency-modulation">Vibrato Stimulation
by Frequency Modulation</a></li>
<li><a href="#noise-generators" id="toc-noise-generators">Noise
Generators</a></li>
<li><a href="#synthesis-by-means-of-spectral-interpolation"
id="toc-synthesis-by-means-of-spectral-interpolation">Synthesis by Means
of Spectral Interpolation</a></li>
</ul></li>
</ul></div>
        </div>
      </div>

      <!-- HEADING -->
      <!-- <div class="uk-container uk-padding uk-padding-remove-bottom"> -->
      <img src="./cover/cover.png" id="cover-img" class="uk-align-center uk-width-1-1" alt="" style="margin-top: 0; object-fit: contain" />
      <div class="uk-container" style="padding-top: 0.2em; padding-bottom: 1.2em">
        <span class="title">Computer Music Book in Max MSP gen~</span>
        <br />
        <div class="date-created">
          <span class="" style="font-size: 1em">Date created: March 28,
2023</span>
        </div>
        <hr />
      </div>
      <!-- </div> -->

      <!-- BODY -->
      <div id="ArticleBody" class="uk-container uk-margin" style="overflow-y: scroll"><script type="text/javascript" src="js/rnbo.js"></script>
<script type="text/javascript" src="js/app.js"></script>
<h2 id="introduction">Introduction</h2>
<p>This post is about exploring some fundamental concepts in Digital
Signal Processing (DSP) and Digital Sound Synthesis by using a program
called Max, a visual programming language.</p>
<h3 id="computer-music-book">Computer Music Book</h3>
<p><img src="./imgs/book.jpg" width="50%" /></p>
<p>One of the authors of <em>Computer Music</em>, Charles Dodge, was
active in computer music composition when it became a new field. In the
1960s, he was at Columbia and Princeton working on an IBM mainframe
computer for his early work, but had to go to Bell Labs to use a
digital-to-analog conversion system in order to hear it.<a href="#fn1"
class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><img src="./imgs/ibm_computer.jpg" alt="IBM 360/91 console and 2250 display" width="80%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">IBM 360/91 console and 2250 display</i>
</div>
<p>In 1970, he worked with three physicists to compose <em>Earth’s
Magnetic Field</em>, where he mapped sounds to magnetic field data. He
also worked on synthesizing the human voice with <em>Speech Songs
(1974)</em>. Another notable work is <em>Any Resemblance is Purely
Coincidental (1980)</em> which combined live piano performance with a
digital manipulation of a recording.</p>
<p><img src="./imgs/dodge.png" alt="IBM 360/91 console and 2250 display" width="80%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Dodge at the Columbia University Computer
Center in 1970 while he was working on Earth’s Magnetic Field.</i>
</div>
<p>It is important to keep in mind that <em>Computer Music</em> was
first published in 1985. Dodge demonstrates some code examples using the
programming languages <em>Csound</em> and <em>Cmusic</em>. Despite the
incredible difference between the computing power when this was written
and now, it still serves as a good introduction to digital signal
processing. The ideas are the same, the only difference is that it is
now faster and easier to get results with computers that are cheaper,
accessible, and more powerful. I will be going over content found from
the following chapters:</p>
<ul>
<li>Chapter 4: Synthesis Fundamentals</li>
<li>Chapter 5: Synthesis Using Distortion Techniques</li>
</ul>
<h3 id="maxmsp">Max/MSP</h3>
<p>Coincidentally also in 1985, <em>Max</em> started to get developed by
Miller Puckette at IRCAM (Institut de Recherche et Coordination
Acoustique/musique). It wasn’t until 1989 when it started to use a
dedicated DSP board. In 1997, Max saw its first release by the company
<a href="https://cycling74.com/">Cycling ’74</a> to include Max/MSP, MSP
seeming to stand for “Max Signal Processing” or Miller Smith Puckette’s
initials. It made Max capable of manipulating real-time digital audio
signals without a dedicated DSP board, which made it possible to
synthesize sound using a general purpose computer.</p>
<p>The name Max, by the way, is named after <a
href="https://en.wikipedia.org/wiki/Max_Mathews">Max Mathews</a>,
another pioneer in computer music.</p>
<h3 id="gen">gen~</h3>
<p><code>gen~</code> is an extension of the <em>Max</em> patching
environment that is more efficient and <a
href="https://en.wikipedia.org/wiki/Low-level_programming_language">lower
level</a>. It is great because it runs at the signal rate (audio rate),
instead of using signal vectors (chunks of samples at a time). This is
ideal for designing audio effects because we can work from a sample by
sample basis. I will be using this environment to go over concepts that
are covered in <em>Computer Music</em>.</p>
<p>I won’t go over too much about how <code>gen~</code> works here,
instead there is this <a
href="https://cycling74.com/tutorials/gen~-for-beginners-part-1-a-place-to-start">online
tutorial</a> written by Gregory Taylor, author of <a
href="https://cycling74.com/books/go">Generating Sound &amp; Organizing
Time</a>.</p>
<h2 id="synthesis-fundamentals">Synthesis Fundamentals</h2>
<h3 id="unit-generator">Unit Generator</h3>
<p>The chapter starts by introducing the concept of a Unit Generator, or
UGen for short, which is essentially an algorithm for audio. The Unit
Generator theory was first developed by Max Mathews and his colleagues
at Bell Labs, originally for the <em>Music N</em> programming languages.
He describes them in his 1960 article in the Bell Telephone System
Technical Journal:</p>
<blockquote>
<p>“The instruments are formed by combining a set of basic building
blocks called <em>unit generators</em>, appropriate combinations of
which can produce sounds of almost any desired complexity or
simplicity.” <a href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a></p>
</blockquote>
<h3 id="parameters">parameters</h3>
<p>A UGen might have <a
href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)">parameters</a>,
that make it possible to specify the values of certain variables that
change the produced audio. Parameters are inputs, that can either be
<strong>entered in</strong> by a user manually, or
<strong>received</strong> by another UGen.</p>
<p>For example, one of the most obvious UGens to start with is an
oscillator, one that produces a simple sine tone. Possible parameters
for this are:</p>
<ul>
<li>Frequency (In Hz)</li>
<li>Phase</li>
<li>Amplitude</li>
</ul>
<p><img src="./imgs/wf.png" alt="Flowchart symbol of a waveform with parameters" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Flowchart symbol of a waveform with
parameters</i>
</div>
<p>This is similar to analog synthesis, where an oscillator module with
a sine wave generator will usually have a knob for frequency and
amplitude (or gain).</p>
<p><img src="./imgs/vintage_osc.jpg" alt="200A Audio Oscillator Production model for 1939" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">200A Audio Oscillator Production model for
1939</i>
</div>
<p>Another programming language for sound synthesis that is still used
today, <em>SuperCollider</em>, carries on the legacy of UGens. The line
of code to produce a sine tone is this:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode c++"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Generates a sine tone.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> SinOsc<span class="op">.</span>ar<span class="op">(</span>freq<span class="op">:</span> <span class="fl">440.0</span><span class="op">,</span> phase<span class="op">:</span> <span class="fl">0.0</span><span class="op">,</span> mul<span class="op">:</span> <span class="fl">1.0</span><span class="op">)</span> <span class="op">}.</span>play<span class="op">;</span></span></code></pre></div>
<p>This is the breakdown:</p>
<ul>
<li><code>SinOsc</code> is the name of the <a
href="https://en.wikipedia.org/wiki/Class_(computer_programming)">class</a>.</li>
<li><code>.ar</code> specifies that it will output at the audio
rate.</li>
<li><code>(freq: 440.0, phase: 0.0, mul: 1.0)</code> are the parameters.
It will have a frequency of 440 Hz, phase of 0, and amplitude of
1.0.</li>
<li><code>{}.play;</code> is to start the process. The curly brackets
are necessary because by surrounding the SinOsc with them we are
creating a <a
href="https://en.wikipedia.org/wiki/Function_(computer_programming)">function</a>,
which is needed by the <code>.play</code> <a
href="https://en.wikipedia.org/wiki/Method_(computer_programming)">method</a>.
<a href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a></li>
</ul>
<p>I just threw around many computer science terms, don’t worry if those
don’t make sense at the moment.</p>
<p>In Max MSP, the term UGen is not used. Instead, they are called
objects, but underneath the surface of objects is essentially the same
as UGens, they have pre-defined instructions for the computer to
generate or process audio. The MSP objects have a tilde
(<code>~</code>). The tilde representing a signal, means that it is
calculating at the audio rate, just like in SuperCollider where
<code>.ar</code> is used. So if the audio rate is set to 44,100, that
means that it is calculating 44,100 values per second.</p>
<p><img src="./imgs/sine.png" alt="IBM 360/91 console and 2250 display" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">A simple sine tone</i>
</div>
<div id="rnbo-root" style="">
<button class="ezdac-button" id="01_ezdac-button">
</button>
<div id="rnbo-parameter-sliders_device_1"
class="rnbo-parameter-sliders">

</div>
</div>
<p>Note that for this purpose, phase does not effect the sound.</p>
<h3 id="signal-flowcharts">Signal Flowcharts</h3>
<p>It is common to use a visual representation of signal flow to get an
idea of how a digital audio instrument/effect is made.</p>
<p><img src="./imgs/signalflow.png" alt="example of a signal flowchart" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Example of a signal flowchart</i>
</div>
<p>This figure is used to show what they <strong>could</strong> look
like, but everyone has their own preferences when drawing them. This one
from the book can be daunting as a first example. One might notice that
it’s somewhat similar to a Max patch. The MULTIPLIER (<code>*</code>) is
the same as the <code>[*~]</code> object in Max. This can be used to
control the amplitude of an audio signal. This is because by multiplying
the signal with a value higher than 1 we are performing
<em>amplification</em>, and if we are multiplying by a value between 0
and 1 we are performing <em>attenuation</em>. In this flowchart however,
the multiplier is used to modulate one UGen with another, often meaning
it is controlling the envelope of a sound. The book example is using a
DIVIDER (<code>a/b</code>), <code>[/~]</code> in Max, to control the
overall instrument amplitude, referring its function as attenuation with
the variable name ATTEN. The ADDER (<code>+</code>) is how to “sum” or
“mix” two signals together.</p>
<p>One more thing to note is that each UGen and mathematical operation
has one or more inputs, ranging from variables, hardcoded values, or a
signal (stream of numbers coming at the audio rate). Since Max is
already a visual programming environment, it is already like a signal
flowchart, but it is still good practice to draw these when thinking and
sketching out ideas when not in front of the computer, or when branching
out to other topics like analog electronics, modular synthesis, etc.</p>
<p>Here is a more minimal patch, a simple amplitude modulation in Max.
Also note how the patch cables that are striped with green and black are
the ones that are sending audio rate signals.</p>
<p><img src="./imgs/simple_ampmod.png" alt="Simple amplitude modulation in Max" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Simple amplitude modulation in Max</i>
</div>
<div id="rnbo-root" style="">
<button class="ezdac-button" id="02_ezdac-button">
</button>
<div id="rnbo-parameter-sliders_device_2"
class="rnbo-parameter-sliders">

</div>
</div>
<h3 id="wave-tables">Wave Tables</h3>
<p>One thing that is the same for all these programs when generating a
sine tone, regardless of old or new, is that they are using a
<code>wave table</code>. This is because this is the most efficient way
of doing it. Instead of creating a program that would calculate each
following value each time, it is much easier on the CPU to look up
pre-stored values of a single wave cycle that are in the computer’s
memory. A wave table is like an audio recording, or a block of samples,
where the program “plays” or goes through each sample and retrieves it,
except that in <em>Wavetable Synthesis</em> it automatically restarts
from the beginning when it reaches the end of the
<strong>cycle</strong>. Notice how the MSP object to produce a sine tone
is called <code>[cycle~]</code>.</p>
<p>From the Max Documentation:</p>
<blockquote>
<p>“The cycle~ object is an interpolating oscillator that reads
repeatedly through one cycle of a waveform, using a wavetable of 512
samples. Its default waveform is one cycle of a cosine wave.”</p>
</blockquote>
<p>Also in the documentation for the cycle~ object, are examples of how
to change the default wavetable. Wavetable data is stored in a <a
href="https://en.wikipedia.org/wiki/Data_buffer">buffer</a>, and in Max
there exists a <code>[buffer~]</code> object where we can store anything
we want, including a single waveform to use for the cycle~ object.</p>
<p>To do this, we create a buffer object and specify a name to reference
it, then specify the number of samples to be 512.</p>
<p>There are several ways to specify the sample size:</p>
<ol type="1">
<li>Using an <code>[attrui]</code> object to select “Size in Samples”
from the dropdown menu.</li>
<li>Sending a “sizeinsamps 512” message using a message object.</li>
<li>Hardcoding it when creating the buffer~ object. For example:
<code>[buffer~ mybuffer @samps 512]</code>.</li>
</ol>
<p>You can view the content in a buffer by using a
<code>[waveform~]</code> object and specifying the name of the buffer
you want to view.</p>
<p><img src="./imgs/wavetable.png" alt="Filling a buffer with a cosine wave" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Filling a buffer with a cosine wave</i>
</div>
<p>The example of a wavetable from the book uses a sine wave (starts at
0 instead of 1), but the sound is still the same. Note how in the
following figure it also has a table for each individual sample value.
For the sake of matching the book, we can use a sine wave in Max
too.</p>
<p><img src="./imgs/wavetable_figure.png" alt="Wavetable from the book" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Wavetable from the book</i>
</div>
<p><img src="./imgs/wavetable_sin.png" alt="Wavetable with sine wave" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Wavetable with sine wave</i>
</div>
<p><img src="./imgs/wavetable_output.png" alt="Plotting the cycle~ signal" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Plotting the cycle~ signal</i>
</div>
<p>When changing the frequency of the cycle~ object, the computer
considers the sampling rate and calculates how fast or slow it needs to
go through the table to get that target frequency.</p>
<p>If we wanted to make a custom waveform, an easy way to do that is to
draw directly on the waveform~ object by setting it to “draw mode”. You
can change the mode by sending it a message <code>(mode draw)</code>,
allowing you to draw the buffer content by clicking and holding the
mouse on the object.</p>
<p><img src="./imgs/custom_waveform.png" alt="Custom waveform" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Custom waveform</i>
</div>
<p>You can load this onto the cycle~ object like we did earlier, but if
you wanted the sound to update as soon as the buffer is updated, it is
better to use the <code>[wave~]</code> object, which is a variable size
wavetable. To play the sound using wave~, the process is a bit
different. Instead of specifying the frequency within the object or
through an inlet, we have to send it a buffer position (value between 0
- 1). To do this we use a <code>[phasor~]</code>. A phasor is a ramp
that goes from 0 and 1 periodically.</p>
<p><img src="./imgs/wave.png" alt="Custom waveform using wave~" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Custom waveform using wave~</i>
</div>
<p>In the Max/MSP documentation called “Basics Tutorial 4”, it adds this
insightful historical note:</p>
<blockquote>
<p>“In the long ago days of MusicN synthesis, the phasor was the only
unit generator that could produce a continuous tone. A phasor had to be
connected to a wavetable to generate other waveforms.”</p>
</blockquote>
<p>Wavetable Synthesis is a big topic. There are a lot of resources out
there if you want to dig deeper. Here are a few that I found to be good
supplements.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=ChmYVCn0lHM">Simon
Hutchinson Video</a></li>
<li><a href="https://www.youtube.com/watch?v=2432oaAcCyg">Building an
Interporlating Wavetable Oscillator in Max</a></li>
<li><a
href="https://thewolfsound.com/sound-synthesis/wavetable-synthesis-algorithm/">Jan
Wilczek - Audio Programmer Article</a></li>
</ul>
<h3 id="aliasing">Aliasing</h3>
<p>There is a problem that occurs when a waveform produces harmonics
past the <code>Nyquist frequency</code>. Consider a phasor~ with a
frequency of 3700 Hz running at the sampling rate of 44.1k. A phasor is
a sawtooth wave, and a saw wave has all harmonics that diminish in
direct proportion to the harmonic number, in other words, the 1st
harmonic (the fundamental) would be 3700 Hz at 1/1 amplitude, 2nd would
be 7400 Hz at 1/2 amplitude, 3rd would be 11,100 Hz at 1/3 amplitude,
and so on. So the 8th harmonic would be 29,600 Hz, which is past the
Nyquist frequency of 22,050 Hz. Compare this with a ramp with a lower
frequency of 1760 Hz.</p>
<p><img src="./imgs/aliasing2.png" alt="Example of ramp with a frequency of 1760 Hz, a lower frequency from the one below." width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Example of ramp with a frequency of 1760 Hz,
a lower frequency from the one below.</i>
</div>
<p><img src="./imgs/aliasing.png" alt="Example of aliasing with a ramp with a frequency of 3700 Hz. The harmonic frequencies fold." width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Example of aliasing. The harmonic frequencies
over Nyquist fold</i>
</div>
<p>You can see in the 1st spectral plot, that the harmonics ramp down as
you would expect, but in the 2nd plot, we get unexpected harmonics in
places that don’t follow the pattern described above. This is because
the harmonics that went past the Nyquist frequency fold back around into
range. So the 8th harmonic of 29.6k, would fold over to 44,100 - 29,600
= 14,500 Hz, 9th harmonic would fold over to 44,100 - 33,300 = 10,800
Hz, and so on.</p>
<p><img src="./imgs/alias_figure.png" alt="Figure demonstrating how sawtooth harmonics fold when they pass the Nyquist frequency" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Figure demonstrating how sawtooth harmonics
fold when they pass the Nyquist frequency</i>
</div>
<p>This results in a sound that does not sound completely harmonic.</p>
<h3 id="generating-functions-of-time">Generating Functions of Time</h3>
<p>The purpose of an <em>envelope</em> is to enclose a running waveform.
Here is a simple envelope that has an <em>attack</em> (how the amplitude
rises during the onset of the tone), a <em>sustain</em> (the amplitude
of the tone during its steady state), and a <em>decay</em> (how the tone
dies away).</p>
<p>Here there are at least four input parameters:</p>
<ul>
<li>rise time</li>
<li>amplitude at peak of attack</li>
<li>duration of the envelope</li>
<li>decay time.</li>
</ul>
<p>Also, the shapes of attack and decay segments need to be
specified.</p>
<p><img src="./imgs/envelope.png" alt="Figure demonstrating an envelope generator, and its effect on a waveform" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Figure demonstrating an envelope generator,
and its effect on a waveform</i>
</div>
<p><img src="./imgs/adsr.png" alt="Figure demonstrating the sections of a simple envelope" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Figure demonstrating the sections of a simple
envelope</i>
</div>
<p>To create this envelope in Max, we can use a wavetable like shown
before, but instead I will introduce new Max objects like
<code>[line~]</code> and <code>[curve~]</code>.</p>
<p><img src="./imgs/line.png" alt="Demonstrating a plot of line~. Starts from 1, and takes 1 ms to go to 0 when the message object is pressed" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Demonstrating a plot of line~. Starts from 1,
and takes 1 ms to go to 0 when the message object is pressed</i>
</div>
<p>In several older programming languages, there existed a UGen called
“linen”. The more customizable object <code>[curve~]</code> has an extra
“curve parameter”, making it possible to also produce exponential
curves. Setting it higher than 0 will result in a convex curve, lower
than 0 will be concave, and 0 will be a linear ramp.</p>
<p><img src="./imgs/curve.png" alt="Demonstrating a plot of curve~. Starts from 1, and takes 1000 ms to go to -1 when the message object is pressed. With a curve parameter of -0.5" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Demonstrating a plot of curve~. Starts from
1, and takes 1000 ms to go to -1 when the message object is pressed.
With a curve parameter of -0.5</i>
</div>
<p>You can create the simple envelope by specifying a list of values in
the message object. The message starts with the starting value (0),
followed by a comma, and the list of values you want to go through in
sequence. For example, if I want an attack of 500ms, sustain of 1000ms,
and decay of 500ms, the message would be
<code>(0, 1 500 1 1000 0 500)</code>.</p>
<p><img src="./imgs/simple_env.png" alt="A simple envelope with a single line~ object" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">A simple envelope with a single line~
object</i>
</div>
<p><img src="./imgs/simple_env3.png" alt="Max patch example of simple envelope using line~" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Max patch example of simple envelope using
line~</i>
</div>
<p><img src="./imgs/simple_env2.png" alt="A simple envelope being applied to an oscillator" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">A simple envelope being applied to an
oscillator</i>
</div>
<p>A more refined envelope is the ADSR envelope. From the book:</p>
<blockquote>
<p>“The ADSR shape is an attempt to imitate the envelopes found in
acoustic instruments. … Here, the tone remains in the sustained state
until the key is released.”</p>
</blockquote>
<p><img src="./imgs/adsr2.png" alt="A figure showing an ADSR envelope." width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">A figure showing an ADSR envelope.</i>
</div>
<p>Max MSP does have an <code>[adsr~]</code> object.</p>
<p><img src="./imgs/noteon.png" alt="Plot of 1 second after initiating note." width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Plot of 1 second after initiating note.</i>
</div>
<p><img src="./imgs/noteoff.png" alt="Plot of 1 second after turning off note." width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Plot of 1 second after turning off note.</i>
</div>
<p>Another useful object is <code>[function~]</code>. It allows you to
draw points and shapes easily, and output it in a line~ or curve~ format
from the second to left outlet.</p>
<p><img src="./imgs/function.png" alt="Example using function~" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Example using function~</i>
</div>
<p>You can set it to curve mode by setting it on creation
(<code>[function @mode 1]</code>), or by setting it on the inspector
menu under “Appearance”. The second to left outlet will now output in
curve~ format.</p>
<p><img src="./imgs/function_curve.png" alt="Example using function~ in curve mode" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Example using function~ in curve mode</i>
</div>
<p>Knowing the extra flexibility of curve~ and its usefulness with
sound, it just makes more sense to always use curve~ because it can do
everything line~ can do and more.</p>
<p>The function also adds the ability to sustain on a single point
position. You can set a sustain point with Cmd + double click. Sending a
bang will initiate the function until it reaches a sustain point and
will stay there until the “(next)” message is received.</p>
<p><img src="./imgs/function_sustain.png" alt="Example using function~ using sustain" width="60%" /></p>
<div class="caption" style="text-align: center; padding-bottom: 1em;">
<i style="color: #ccd3d5;">Example using function~ using sustain</i>
</div>
<h3 id="additive-synthesis">Additive Synthesis</h3>
<p>A waveform at a constant frequency enclosed in an envelope is based
on the Helmholtz model of musical sound. Helmholtz showed that the
timbre of musical notes, and vowel sounds, are a result of their complex
combination of many sounds. Just like white light is a combination of
many colors, musical notes are composed of many different tones.</p>
<h4 id="helmholtzs-apparatus-for-the-synthesis-of-sound">Helmholtz’s
Apparatus for the Synthesis of Sound</h4>
<p>This device created by Helmholtz around 1860 can be considered the
very first sound synthesizer. It used tuning forks to generate a
fundamental frequency and the first six overtones which may then be
combined in varying proportions. By varying the combination of tones and
their intensities, one can see how it affects the timbre of the overall
sound.</p>
<div style="margin-bottom: 15px">
<iframe width="100%" height="480" src="https://www.youtube.com/embed/_OdO8gWayjE?si=ag2h5FDgWyLvvfYS&amp;controls=1" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen uk-responsive uk-video>
</iframe>
</div>
<p>.</p>
<h3 id="amplitude-modulation">Amplitude Modulation</h3>
<h3 id="ring-modulation">Ring Modulation</h3>
<h3 id="vibrato-stimulation-by-frequency-modulation">Vibrato Stimulation
by Frequency Modulation</h3>
<h3 id="noise-generators">Noise Generators</h3>
<h3 id="synthesis-by-means-of-spectral-interpolation">Synthesis by Means
of Spectral Interpolation</h3>
<aside id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>An interview with Charles Dodge (1993).
<a href="https://www.jstor.org/stable/3681298">https://www.jstor.org/stable/3681298</a><a
href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Max Mathews, An Acoustical Compiler for Musical and
Psychological Stimuli, Bell Telephone System Technical Journal, 1961.
<a href="https://ia801601.us.archive.org/32/items/bstj40-3-677">https://archive.org/details/bstj40-3-677</a><a
href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li
id="fn3"><p><a href="https://doc.sccode.org/Tutorials/Getting-Started/05-Functions-and-Sound.html">https://doc.sccode.org/Tutorials/Getting-Started/05-Functions-and-Sound.html</a><a
href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside></div>

      <div class="uk-container uk-margin">
        <ul uk-accordion>
          <li>
            <a
              id="js-scroll-trigger"
              class="uk-accordion-title"
              style="background-color: white; border-radius: 25px; border: 2px solid #ccd3d5"
              href="#comments"
              uk-scroll
            >
              Have a Suggestion/Comment?
              <span uk-icon="happy"></span>
            </a>
            <div class="uk-accordion-content">
              <div id="disqus_thread"></div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <script>
      /**
       *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
      var disqus_config = function () {
        let pagetitle = 'Computer Music Book in Max MSP gen~';
        this.page.url = 'https://juanedflores.com/Blog/' + pagetitle.replace(/ /g, '_') + '/' + pagetitle.replace(/ /g, '_') + '.html';
        this.page.identifier = '/' + pagetitle.replace(/ /g, '_');
        this.page.title = pagetitle.replace(/ /g, '_');
      };

      (function () {
        // DON'T EDIT BELOW THIS LINE
        var d = document,
          s = d.createElement('script');
        s.src = '//juanedflores-blog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>
      Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>

    <!-- highlightjs badge -->
    <script src="../../js/highlightjs-badge.js"></script>

    <script>
      var pres = document.querySelectorAll('pre>code');
      for (var i = 0; i < pres.length; i++) {
        hljs.highlightBlock(pres[i]);
      }
      var options = {
        contentSelector: '#ArticleBody',
        // CSS class(es) used to render the copy icon.
        copyIconClass: 'fa fa-copy',
        // CSS class(es) used to render the done icon.
        checkIconClass: 'fa fa-check text-success',
      };
      window.highlightJsBadge(options);
    </script>
  </body>
</html>
